{
  "version": 3,
  "sources": [
    "service_info_edit_modal_ctrl.es6"
  ],
  "names": [],
  "mappings": "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",
  "file": "service_info_edit_modal_ctrl.js",
  "sourcesContent": [
    "class ServiceInfoEditModalControl {\r\n    constructor($scope, $modalInstance, $filter, $http, $timeout, shareDataService, dataTableUtils) {\r\n\r\n        $scope.selectedItem = shareDataService.common.getSelectedRowItems();\r\n\r\n        $scope.regexCharactersOnly = shareDataService.common.getCharactersOnlyRegex();\r\n\r\n        $scope.language = localStorage.getItem('NG_TRANSLATE_LANG_KEY');\r\n\r\n        $scope.organizations = undefined;\r\n\r\n        $scope.selectedOrganization = {};\r\n\r\n        $scope.fields = {\r\n            svcId             : undefined,\r\n            svcSysName        : undefined,\r\n            svcModuleName     : undefined,\r\n            svcSysAlias       : undefined,\r\n            svcFunctionName   : undefined,\r\n            svcDescriptionZhCn: undefined,\r\n            svcDescriptionEn  : undefined,\r\n            orgId             : undefined,\r\n            svcOperatorId     : sessionStorage.getItem('userId')\r\n        };\r\n\r\n        $scope.alerts = [\r\n            // { type: 'danger', msg: '' }\r\n        ];\r\n\r\n        $scope.isFormDisabled = false;\r\n\r\n        /**\r\n         * Alert when operation is successful\r\n         */\r\n        function addSuccessAlert() {\r\n            $scope.alerts.push({\r\n                type: 'success',\r\n                msg : $filter('translate')('pages.sm.service.SERVICE_MGMT_ALERTS.SERVICE_MGMT_ALERT_SERVICE_INFO_EDIT_SUCCESSFUL')\r\n            });\r\n        }\r\n\r\n        /**\r\n         * Adding red alert box\r\n         * @param {string} message The message\r\n         */\r\n        function addFailAlert(message) {\r\n            $scope.alerts.push({\r\n                type: 'danger',\r\n                msg : message\r\n            });\r\n        }\r\n\r\n        /**\r\n         * Close the alert\r\n         * @param index Index of the alert\r\n         * @param isInAddingFieldPanel Is this alert in the adding service panel\r\n         */\r\n        $scope.closeAlert = (index, isInAddingFieldPanel) => {\r\n            if (isInAddingFieldPanel) {\r\n                $scope.alertsInAddingFields.splice(index, 1);\r\n            } else {\r\n                $scope.alerts.splice(index, 1);\r\n            }\r\n        };\r\n\r\n        /**\r\n         * Fetch the list of organizations\r\n         */\r\n        function fetchOrganizations() {\r\n            $http({\r\n                method: 'POST',\r\n                url   : CLB_FRONT_BASE_URL + 'select/queryOrganizationName'\r\n            }).then((response) => {\r\n                let responseData = response.data;\r\n\r\n                if (responseData.flag === 'success') {\r\n                    $scope.organizations = responseData.organizationInfo;\r\n\r\n                    if (responseData.organizationInfo.length === 1) {\r\n                        $scope.selectedOrganization.orgId = responseData.organizationInfo[0].orgId;\r\n                    }\r\n                }\r\n            }, () => {\r\n                toasterUtils.showErrorToaster($filter('translate')('pages.common.COMMON_TOAST_TEXTS.COMMON_TOAST_TEXT_NETWORK_FAILED'));\r\n            });\r\n        }\r\n\r\n        /**\r\n         * Perform the initialization AJAXes\r\n         */\r\n        function performInitAjaxes() {\r\n            fetchOrganizations();\r\n        }\r\n\r\n        $scope.editService = (form) => {\r\n            $scope.alerts = [];\r\n            $scope.isFormDisabled = true;\r\n\r\n            $http({\r\n                method: 'POST',\r\n                url   : CLB_FRONT_BASE_URL + 'svc/editeServiceInfo',\r\n                params: {\r\n                    'svcId'                               : $scope.fields.svcId,\r\n                    'serviceRequiredVo.svcSysName'        : $scope.fields.svcSysName,\r\n                    'serviceRequiredVo.svcModuleName'     : $scope.fields.svcModuleName,\r\n                    'serviceRequiredVo.svcSysAlias'       : $scope.fields.svcSysAlias,\r\n                    'serviceRequiredVo.svcFunctionName'   : $scope.fields.svcFunctionName,\r\n                    'serviceRequiredVo.svcDescriptionZhCn': $scope.fields.svcDescriptionZhCn,\r\n                    'serviceRequiredVo.svcDescriptionEn'  : $scope.fields.svcDescriptionEn,\r\n                    'serviceRequiredVo.orgId'             : $scope.fields.orgId,\r\n                    'serviceRequiredVo.svcOperatorId'     : $scope.fields.svcOperatorId,\r\n                    'isEdited'                            : form.$dirty\r\n                }\r\n            }).then((response) => {\r\n                if (response.data.flag === 'success') {\r\n                    addSuccessAlert();\r\n                    dataTableUtils.reloadDataTable($('#tblServices'));\r\n                    $timeout(function () {\r\n                        $modalInstance.dismiss('cancel');\r\n                    }, 2000);\r\n                } else {\r\n                    $scope.isFormDisabled = false;\r\n\r\n                    let message = '';\r\n                    if ($scope.language === 'zh_CN') {\r\n                        message = response.data.messageZhCn;\r\n                    } else if ($scope.language === 'en') {\r\n                        message = response.data.messageEn;\r\n                    }\r\n\r\n                    addFailAlert(message ? message : $filter('translate')('pages.sm.service.SERVICE_MGMT_ALERTS.SERVICE_MGMT_ALERT_SERVICE_INFO_EDIT_FAILED'));\r\n                }\r\n            }, () => {\r\n                toasterUtils.showErrorToaster($filter('translate')('pages.common.COMMON_TOAST_TEXTS.COMMON_TOAST_TEXT_NETWORK_FAILED'));\r\n            });\r\n        };\r\n\r\n        /**\r\n         * When the organization select box changed\r\n         */\r\n        $scope.orgSelectOnChange = () => {\r\n            $scope.fields.orgId = $scope.selectedOrganization.orgId;\r\n        };\r\n\r\n        // Close modal\r\n        $scope.cancel = () => {\r\n            $modalInstance.dismiss('cancel');\r\n        };\r\n\r\n        angular.element(() => {\r\n            $scope.isFormDisabled = true;\r\n\r\n            performInitAjaxes();\r\n\r\n            $scope.fields.svcId = $scope.selectedItem.svcId;\r\n            $scope.fields.svcSysName = $scope.selectedItem.svcSysName;\r\n            $scope.fields.svcModuleName = $scope.selectedItem.svcModuleName;\r\n            $scope.fields.svcSysAlias = $scope.selectedItem.svcSysAlias;\r\n            $scope.fields.svcFunctionName = $scope.selectedItem.svcFunctionName;\r\n            $scope.fields.svcDescriptionZhCn = $scope.selectedItem.svcDescriptionZhCn;\r\n            $scope.fields.svcDescriptionEn = $scope.selectedItem.svcDescriptionEn;\r\n            $scope.fields.orgId = $scope.selectedItem.orgId;\r\n            $scope.selectedOrganization.orgId = $scope.selectedItem.orgId;\r\n\r\n            $scope.isFormDisabled = false;\r\n        });\r\n    }\r\n}\r\n\r\nclass EditServiceInfoModalInstanceCtrl {\r\n    constructor($scope, $modal, $filter, toasterUtils, shareDataService) {\r\n        $scope.showEditServiceInfoPopup = () => {\r\n            let table = angular.element('#tblServices').DataTable();\r\n\r\n            if (table.row('.active').length === 1) {\r\n                shareDataService.common.setSelectedRowItems(table.row('.active').data());\r\n\r\n                $modal.open({\r\n                    backdrop   : 'static',\r\n                    templateUrl: 'editServiceInfoModal.html',\r\n                    controller : 'ServiceInfoEditModalControl',\r\n                    size       : 'lg'\r\n                });\r\n\r\n            } else {\r\n                toasterUtils.showErrorToaster($filter('translate')('pages.common.COMMON_TOAST_TEXTS.COMMON_TOAST_TEXT_SELECT_ROW'));\r\n            }\r\n        };\r\n    }\r\n}\r\n\r\napp.controller('EditServiceInfoModalInstanceCtrl', EditServiceInfoModalInstanceCtrl);\r\napp.controller('ServiceInfoEditModalControl', ServiceInfoEditModalControl);"
  ]
}